{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nvar __jsx = React.createElement;\nimport React from \"react\";\nimport Modal from \"react-modal\";\nimport AutoSizer from \"react-virtualized-auto-sizer\";\nimport { FixedSizeList as List } from \"react-window\";\nimport { Container } from \"styled-container-component\";\nimport { Column, Row } from \"styled-grid-system-component\";\nimport { Banner } from \"./banner/banner\";\nimport { Question } from \"./question/question\";\nimport { QuestionAnswer } from \"./question/question-answer\";\nimport { homeBanner } from \"./data\";\nimport { BaseUrl } from \"../url\";\nimport { Chat } from \"./chat/chat\";\nexport function ForumLayout(_ref) {\n  var queryName = _ref.queryName;\n\n  var _React$useState = React.useState([]),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      query = _React$useState2[0],\n      setQuery = _React$useState2[1];\n\n  var _React$useState3 = React.useState(0),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      skip = _React$useState4[0],\n      setSkip = _React$useState4[1];\n\n  var myRef = React.useRef(null);\n\n  var _React$useState5 = React.useState(0),\n      _React$useState6 = _slicedToArray(_React$useState5, 2),\n      scrollTop = _React$useState6[0],\n      setScrollTop = _React$useState6[1];\n\n  var _React$useState7 = React.useState(false),\n      _React$useState8 = _slicedToArray(_React$useState7, 2),\n      modalIsOpen = _React$useState8[0],\n      setIsOpen = _React$useState8[1];\n\n  var _React$useState9 = React.useState([]),\n      _React$useState10 = _slicedToArray(_React$useState9, 2),\n      array = _React$useState10[0],\n      setArray = _React$useState10[1];\n\n  React.useEffect(function () {\n    getForumQuery(queryName);\n  }, []);\n\n  function getForumQuery(queryName) {\n    fetch(\"\".concat(BaseUrl, \"/apiV2/forumQueries\"), {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        expertiseId: \"\",\n        limit: 30,\n        skip: skip\n      })\n    }).then(function (response) {\n      return response.json();\n    }).then(function (res) {\n      var t = query.concat(res.queries);\n      setQuery(t);\n    });\n  }\n\n  function onScroll() {\n    setSkip(skip + 1);\n    var scrollY = window.scrollY; //Don't get confused by what's scrolling - It's not the window\n\n    var scrollTops = myRef.current.scrollTop;\n    setScrollTop(scrollTops);\n    getForumQuery(queryName);\n  }\n\n  function openModal(test) {\n    console.log(test);\n    var bigCities = query.filter(function (city) {\n      return city._id === test;\n    });\n    setArray(bigCities);\n    setIsOpen(true);\n  }\n\n  function closeModal() {\n    setIsOpen(false);\n  }\n\n  var Rows = function Rows(_ref2) {\n    var index = _ref2.index,\n        style = _ref2.style;\n    return __jsx(\"div\", {\n      style: style\n    }, __jsx(Question, {\n      QuestionItems: query[index],\n      arrays: query,\n      onClickEvent: openModal\n    }));\n  };\n\n  var customStyles = {\n    overlay: {\n      backgroundColor: \"#2125293b\"\n    },\n    content: {\n      top: \"50%\",\n      left: \"50%\",\n      right: \"auto\",\n      bottom: \"auto\",\n      marginRight: \"-50%\",\n      transform: \"translate(-50%, -50%)\",\n      width: \"80%\",\n      height: \"600px\",\n      overflow: \"auto\"\n    }\n  };\n  return __jsx(React.Fragment, null, __jsx(Banner, {\n    BanerItems: homeBanner\n  }), __jsx(Container, null, __jsx(Row, null, __jsx(Column, {\n    md: 12,\n    sm: 12,\n    xs: 12\n  }, __jsx(\"div\", {\n    style: {\n      width: \"100%\",\n      height: \"100vh\",\n      overflow: \"auto\"\n    },\n    ref: myRef,\n    onScroll: onScroll\n  }, __jsx(AutoSizer, null, function (_ref3) {\n    var height = _ref3.height,\n        width = _ref3.width;\n    return __jsx(List, {\n      height: height,\n      itemCount: query.length,\n      itemSize: 260,\n      width: width,\n      useIsScrolling: true\n    }, query ? Rows : \"loadding\");\n  }))))), __jsx(Chat, null), __jsx(Modal, {\n    isOpen: modalIsOpen,\n    onRequestClose: closeModal,\n    style: customStyles,\n    contentLabel: \"Example Modal\"\n  }, array.map(function (list, i) {\n    return __jsx(QuestionAnswer, {\n      QuestionItems: list\n    });\n  })));\n}","map":null,"metadata":{},"sourceType":"module"}