{"ast":null,"code":"var __jsx = React.createElement;\nimport React from \"react\";\nimport Modal from \"react-modal\";\nimport AutoSizer from \"react-virtualized-auto-sizer\";\nimport { FixedSizeList as List } from \"react-window\";\nimport { Container } from \"styled-container-component\";\nimport { Column, Row } from \"styled-grid-system-component\";\nimport { Banner } from \"./banner/banner\";\nimport { Question } from \"./question/question\";\nimport { QuestionAnswer } from \"./question/question-answer\";\nimport { homeBanner } from \"./data\";\nimport { BaseUrl } from \"../url\";\nimport { Chat } from \"./chat/chat\";\nimport { FlexTag, LoadMorebutton } from \"../components/small-component\";\nexport function ForumLayout({\n  queryName\n}) {\n  const [query, setQuery] = React.useState([]);\n  const [skip, setSkip] = React.useState(0);\n  const myRef = React.useRef(null);\n  const [scrollTop, setScrollTop] = React.useState(0);\n  const [modalIsOpen, setIsOpen] = React.useState(false);\n  const [array, setArray] = React.useState([]);\n  const [windowSize, setWindowSize] = React.useState({\n    width: undefined,\n    height: undefined\n  });\n  React.useEffect(() => {\n    function handleResize() {\n      setWindowSize({\n        width: window.innerWidth,\n        height: window.innerHeight\n      });\n    }\n\n    window.addEventListener(\"resize\", handleResize);\n    handleResize();\n    return () => window.removeEventListener(\"resize\", handleResize);\n  }, []);\n  React.useEffect(() => {\n    getForumQuery(queryName);\n  }, []);\n\n  function getForumQuery(queryName) {\n    fetch(`${BaseUrl}/apiV2/forumQueries`, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        expertiseId: \"\",\n        limit: 30,\n        skip: skip\n      })\n    }).then(response => {\n      return response.json();\n    }).then(res => {\n      const t = query.concat(res.queries);\n      setQuery(t);\n    });\n  }\n\n  function onScroll() {\n    setSkip(skip + 1);\n    const scrollY = window.scrollY; //Don't get confused by what's scrolling - It's not the window\n\n    const scrollTops = myRef.current.scrollTop;\n    setScrollTop(scrollTops);\n    getForumQuery(queryName);\n  }\n\n  function openModal(test) {\n    let bigCities = query.filter(city => city._id === test);\n    setArray(bigCities);\n    setIsOpen(true);\n  }\n\n  function closeModal() {\n    setIsOpen(false);\n  }\n\n  const Rows = ({\n    index,\n    style\n  }) => __jsx(\"div\", {\n    style: style\n  }, __jsx(Question, {\n    QuestionItems: query[index],\n    windowwidth: windowSize.width,\n    onClickEvent: openModal\n  }));\n\n  const customStyles = {\n    overlay: {\n      backgroundColor: \"#2125293b\"\n    },\n    content: {\n      top: \"50%\",\n      left: \"50%\",\n      right: \"auto\",\n      bottom: \"auto\",\n      marginRight: \"-50%\",\n      transform: \"translate(-50%, -50%)\",\n      width: \"80%\",\n      height: array.length !== 0 ? array[0].answers ? array[0].answers.length > 1 ? \"500px\" : \"350px\" : \"350px\" : \"350px\",\n      overflow: \"auto\"\n    }\n  };\n  return __jsx(React.Fragment, null, __jsx(Banner, {\n    BanerItems: homeBanner\n  }), __jsx(Container, null, __jsx(Row, null, __jsx(Column, {\n    md: 12,\n    sm: 12,\n    xs: 12\n  }, __jsx(\"div\", {\n    style: {\n      width: \"100%\",\n      height: \"100vh\",\n      overflow: \"auto\"\n    },\n    ref: myRef,\n    onScroll: onScroll\n  }, __jsx(AutoSizer, null, ({\n    height,\n    width\n  }) => __jsx(List, {\n    height: height,\n    itemCount: query.length,\n    itemSize: 180,\n    width: width,\n    useIsScrolling: true\n  }, query ? Rows : \"loadding\")))))), __jsx(Chat, null), __jsx(Modal, {\n    isOpen: modalIsOpen,\n    onRequestClose: closeModal,\n    style: customStyles,\n    contentLabel: \"Example Modal\"\n  }, __jsx(FlexTag, {\n    justifyContent: \"flex-end\"\n  }, __jsx(LoadMorebutton, {\n    onClick: closeModal\n  }, \" X\")), array.map((list, i) => __jsx(QuestionAnswer, {\n    QuestionItems: list\n  })), __jsx(FlexTag, {\n    justifyContent: \"flex-end\"\n  }, __jsx(LoadMorebutton, {\n    onClick: closeModal\n  }, \"Close\"))));\n}","map":null,"metadata":{},"sourceType":"module"}